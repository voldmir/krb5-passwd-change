{% extends "layout.html" %}
{% block title %}Reset{% endblock %}

{% block head %}
{{ super() }}
<script>

    $(document).ready(function () {
        $("#loginform").validate({
            ignoreTitle: true,
            rules: {
                password_old: {
                    required: true
                },
                password_new: {
                    required: true,
                    minlength: 8
                },
                password_new_confirm: {
                    required: true,
                    equalTo: "#password_new"
                }
            },
            messages: {
                password_old: {
                    required: "Задайте старый пароль"
                },
                password_new: {
                    required: "Задайте новый пароль",
                    minlength: "Пароль не может содержать менее 8 символов",
                },
                password_new_confirm: {
                    required: "Повторите новый пароль",
                    equalTo: "Пароли не совпадают"
                },
            }
        });
    });
</script>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-offset-2 col-md-8">
        <form class="form-horizontal" method="post" action="/action/change_password" id="loginform">
            <span class="heading">Сменить пароль</span>
            <span class="error">{{ mess }}</span>
            <div class="form-group">
                <input type="password" class="form-control" name="password_old" id="password_old"
                    placeholder="Старый пароль">
            </div>
            <div class="form-group">

                <input type="password" class="form-control" name="password_new" id="password_new"
                    placeholder="Новый пароль">
            </div>
            <div class="form-group">

                <input type="password" class="form-control" name="password_new_confirm" id="password_new_confirm"
                    placeholder="Подтверждение пароля">
                <input type="hidden" value="{{ method }}" name="method">
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-default">Изменить</button>
                <a class="btn btn-primary" href="/logout" role="button">Отмена</a>
            </div>
        </form>
    </div>

</div><!-- /.row -->
{% endblock %}